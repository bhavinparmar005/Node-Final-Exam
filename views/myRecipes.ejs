<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>My Recipes â€” RecipeShare</title>
    <link rel="stylesheet" href="/style.css" />
    <style>
      .container { max-width: 900px; margin: 0 auto; padding: 20px; }
      .recipe-list { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); }
      .card { border: 1px solid #ccc; border-radius: 8px; padding: 10px; background: #fff; }
      .card img { width: 100%; height: 180px; object-fit: cover; border-radius: 6px; }
      .card-actions { display: flex; gap: 10px; margin-top: 10px; }
      .btn { padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; }
      .small { font-size: 0.9rem; }
      .danger { background-color: #e74c3c; color: white; }
      .edit { background-color: #3498db; color: white; }
      .add-btn { display: inline-block; margin-bottom: 20px; background-color: #2ecc71; color: white; padding: 8px 12px; border-radius: 4px; text-decoration: none; }
    </style>
  </head>
  <body>
    <%- include('navbar') %>

    <main class="container">
  

      <section class="recipe-list">
        <% if (!recipes || recipes.length === 0) { %>
          <p>
            You haven't added any recipes yet.
            <a href="/recipes/add">Add one</a> now.
          </p>
        <% } else { %>
          <% recipes.forEach(function(recipe) { %>
            <div class="card">
              <img src="<%= recipe.image || '/images/default-recipe.jpg' %>" alt="<%= recipe.title %>" />
              <h3><%= recipe.title %></h3>
              <p class="muted">By <%= recipe.createdBy?.username || 'You' %></p>
              
              <div class="card-actions">
                <!-- View -->
                <a class="btn small" href="/recipes/<%= recipe._id %>">View</a>

                <!-- Edit -->
                <a class="btn small edit" href="/recipes/edit/<%= recipe._id %>">Edit</a>

                <!-- Delete -->
                <form action="/api/recipes/delete/<%= recipe._id %>" method="POST" class="inline-form">
                  <button type="submit" class="btn small danger" onclick="return confirm('Are you sure you want to delete this recipe?');">
                    Delete
                  </button>
                </form>
              </div>
            </div>
          <% }) %>
        <% } %>
      </section>
    </main>
  </body>
</html>
